/* ========================================================================== */
/*	    Exp21_1a.c : D/A Converter Triangular Wave Output		      */
/* ========================================================================== */
/*			  Designed and programmed by Duck-Yong Yoon in 2010.  */

#include <avr/io.h>
#include "OK-128LCD.h"

unsigned char tri_table[100] = {		// triangular wave data table
    0x00,0x05,0x0A,0x0F,0x14,0x1A,0x1F,0x24,0x29,0x2E,
    0x33,0x38,0x3D,0x42,0x47,0x4D,0x52,0x57,0x5C,0x61,
    0x66,0x6B,0x70,0x75,0x7A,0x80,0x85,0x8A,0x8F,0x94,
    0x99,0x9E,0xA3,0xA8,0xAD,0xB3,0xB8,0xBD,0xC2,0xC7,
    0xCC,0xD1,0xD6,0xDB,0xE0,0xE6,0xEB,0xF0,0xF5,0xFA,
    0xFF,0xFA,0xF5,0xF0,0xEB,0xE5,0xE0,0xDB,0xD6,0xD1,
    0xCC,0xC7,0xC2,0xBD,0xB8,0xB2,0xAD,0xA8,0xA3,0x9E,
    0x99,0x94,0x8F,0x8A,0x85,0x7F,0x7A,0x75,0x70,0x6B,
    0x66,0x61,0x5C,0x57,0x52,0x4C,0x47,0x42,0x3D,0x38,
    0x33,0x2E,0x29,0x24,0x1F,0x19,0x14,0x0F,0x0A,0x05 };

int main(void)
{
  unsigned char i;

  MCU_initialize();                             // initialize MCU and kit
  Delay_ms(50);                                 // wait for system stabilization
  LCD_initialize();                             // initialize text LCD module
  Beep();

  LCD_string(0x80,"  DAC0800 D/A   ");          // display title
  LCD_string(0xC0,"Triangular Wave ");

  while(1)
    { for(i = 0; i < 100; i++)			// output D/A
        { PORTA = tri_table[i];
          Delay_us(10);
        }
    }
}
